<template>
  <div class="d-flex flex-column w-100 vh-100 overflow-auto">
    <div class="alert-holder">
      <b-alert
        v-for="(a,i) in alerts"
        :variant=" a.variant || 'info'"
        :key="'alert:'+i"
        :show="a.countdown"
        dismissible
        @dismiss-count-down="a.countdown=$event"
        @dismissed="alerts.splice(i, 0)"
      >
        {{ a.message }}
      </b-alert>
    </div>
    <main class="w-100 flex-grow">
      <router-view />
    </main>
    <c-prompts />
  </div>
</template>
<script>
import { components } from '@cortezaproject/corteza-vue'

export default {
  components: {
    CPrompts: components.CPrompts,
  },

  data () {
    return {
      alerts: [], // { variant: 'info', message: 'foo' },
    }
  },

  created () {
    this.handleAlert((alert) => this.alerts.push(alert))
  },

  beforeDestroy () {
    this.$root.$off('alert')
  },
}
</script>
